<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="A fully featured admin theme which can be used to build CRM, CMS, etc.">
    <meta name="author" content="Coderthemes">

    <link rel="shortcut icon" href="assets/images/favicon_1.ico">

    <title>来于返于人员登记</title>

    <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="assets/css/core.css" rel="stylesheet" type="text/css">
    <link href="assets/css/icons.css" rel="stylesheet" type="text/css">
    <link href="assets/css/components.css" rel="stylesheet" type="text/css">
    <link href="assets/css/pages.css" rel="stylesheet" type="text/css">
    <link href="assets/css/menu.css" rel="stylesheet" type="text/css">
    <link href="assets/css/responsive.css" rel="stylesheet" type="text/css">
    <link href="assets/plugins/timepicker/bootstrap-timepicker.min.css" rel="stylesheet">
    <link href="assets/plugins/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css" rel="stylesheet">
    <link href="assets/plugins/sweetalert/dist/sweetalert.css" rel="stylesheet" type="text/css">

    <script src="assets/js/modernizr.min.js"></script>
    <style>
        .content-page > .content {
            margin: 0;
        }

        body {
            /* background: #219df6; */
        }
    </style>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->


</head>


<body class="fixed-left">

    <!-- Begin page -->
    <div id="wrapper">



        <!-- ============================================================== -->
        <!-- Start right Content here -->
        <!-- ============================================================== -->
        <div class="content-page">
            <!-- Start content -->
            <div class="content">
                <div class="container">

                    <!-- Page-Title -->

                    <div class="row">
                        <!-- Basic example -->
                        <div class="col-md-6">
                            <div class="panel panel-default">
                                <div class="panel-heading"><h3 class="panel-title">来于返于人员登记</h3></div>
                                <div class="panel-body">
                                    <form id="commentForm"  novalidate="novalidate">
                                        <div class="form-group">
                                            <label for="xiang"><span class="text-danger">*</span>乡镇 </label>
                                            <select class="form-control input-lg" id="xiang" name="xiang">
                                                <option>禾丰镇</option>
                                                <option>贡江镇</option>
                                                <option>铁山垅镇</option>
                                                <option>盘古山镇</option>
                                                <option>祁禄山镇</option>
                                                <option>梓山镇</option>
                                                <option>银坑镇</option>
                                                <option>岭背镇</option>
                                                <option>罗坳镇</option>
                                                <option>罗江乡</option>
                                                <option>小溪乡</option>
                                                <option>利村乡</option>
                                                <option>新陂乡</option>
                                                <option>靖石乡</option>
                                                <option>黄麟乡</option>
                                                <option>沙心乡</option>
                                                <option>宽田乡</option>
                                                <option>葛坳乡</option>
                                                <option>桥头乡</option>
                                                <option>马安乡</option>
                                                <option>仙下乡</option>
                                                <option>车溪乡</option>
                                                <option>段屋乡</option>

                                            </select>
                                            <!-- <input type="text" class="form-control input-lg" id="exampleInputEmail1" placeholder="Enter email"> -->
                                        </div>
                                        <div class="form-group">
                                            <label for="cun"><span class="text-danger">*</span>村  </label>
                                            <input type="text" class="form-control input-lg" id="cun" name="cun" placeholder="请输入村">
                                        </div>
                                        <div class="form-group">
                                            <label for="zu">组</label>
                                            <input type="text" class="form-control input-lg" id="zu" name="zu" placeholder="请输入组">
                                        </div>
                                        <div class="form-group">
                                            <label for="xingming"><span class="text-danger">*</span>姓名 </label>
                                            <input type="text" class="form-control input-lg" id="xingming" name="xingming" placeholder="请输入姓名">
                                        </div>
                                        <div class="form-group">
                                            <label for="sfzh"><span class="text-danger">*</span>身份证号码</label>
                                            <input type="text" class="form-control input-lg" id="sfzh" name="sfzh" placeholder="请输入身份证号">
                                        </div>
                                        <div class="form-group">
                                            <label for="phone"><span class="text-danger">*</span>联系方式</label>
                                            <input type="number" class="form-control input-lg" id="phone" name="phone" placeholder="请输入联系方式">
                                        </div>
                                        <div class="form-group">
                                            <label for="edate"><span class="text-danger">*</span>来于返于时间</label>
                                            <input type="text" class="form-control" id="edate" name="edate" placeholder="年/月/日">
                                            <!-- <input type="text" class="form-control input-lg" id="exampleInputEmail1" placeholder="请输入来于返于时间"> -->
                                        </div>
                                        <div class="form-group">
                                            <label for="back_address"><span class="text-danger">*</span>从何地返回(省、市、县、乡（街道）等)</label>
                                            <input type="text" class="form-control input-lg" id="back_address" name="back_address" placeholder="请输入从何地返回(省、市、县、乡（街道）等)">
                                        </div>
                                        <div class="form-group">
                                            <label for="back_type"><span class="text-danger">*</span>返回方式（1、自驾：车牌；2、座车（飞机）：班次等）</label>
                                            <input type="text" class="form-control input-lg" id="back_type" name="back_type" placeholder="请输入返回方式（1、自驾：车牌；2、座车（飞机）：班次等）">
                                        </div>

                                        <div class="form-group">
                                            <label for="helthy"><span class="text-danger">*</span>身体状况</label>
                                            <input type="text" class="form-control input-lg" id="helthy" name="helthy" placeholder="请输入身体状况">
                                        </div>
                                        <div class="form-group">
                                            <label for="mname">监管人姓名</label>
                                            <input type="text" class="form-control input-lg" id="mname" name="mname" placeholder="请输入监管人姓名">
                                        </div>
                                        <div class="form-group">
                                            <label for="mjob">监管人职务</label>
                                            <input type="text" class="form-control input-lg" id="mjob" name="mjob" placeholder="请输入监管人职务">
                                        </div>
                                        <div class="form-group">
                                            <label for="mphone">监管人联系方式</label>
                                            <input type="text" class="form-control input-lg" id="mphone" name="mphone" placeholder="请输入监管人联系方式">
                                        </div>
                                        <div class="form-group">
                                            <label for="desc">备注</label>
                                            <input type="text" class="form-control input-lg" id="desc" name="desc" placeholder="请输入备注">
                                        </div>


                                        <button type="submit" class="btn btn-lg btn-block btn-success waves-effect waves-light">提交</button>
                                    </form>
                                </div><!-- panel-body -->
                            </div> <!-- panel -->
                        </div> <!-- col-->


                    </div> <!-- End row -->



                </div> <!-- container -->

            </div> <!-- content -->



        </div>
        <!-- ============================================================== -->
        <!-- End Right content here -->
        <!-- ============================================================== -->




    </div>
    <!-- END wrapper -->

    <script>
        var resizefunc = [];
    </script>

    <!-- Main  -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/detect.js"></script>
    <script src="assets/js/fastclick.js"></script>
    <script src="assets/js/jquery.slimscroll.js"></script>
    <script src="assets/js/jquery.blockUI.js"></script>
    <script src="assets/js/waves.js"></script>
    <script src="assets/js/wow.min.js"></script>
    <script src="assets/js/jquery.nicescroll.js"></script>
    <script src="assets/js/jquery.scrollTo.min.js"></script>
    <script src="assets/plugins/timepicker/bootstrap-timepicker.min.js"></script>
    <script type="text/javascript" src="assets/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
    <script type="text/javascript" src="assets/plugins/bootstrap-datepicker/js/bootstrap-datepicker.zh-CN.min.js"></script>
    <script src="assets/plugins/sweetalert/dist/sweetalert.min.js"></script>

    <script src="assets/js/jquery.app.js"></script>
    <!--form validation-->
    <script type="text/javascript" src="assets/plugins/jquery-validation/dist/jquery.validate.min.js"></script>

    <script>
        jQuery(document).ready(function () {
            jQuery('#edate').datepicker({
                language: 'zh-CN',
                autoclose: true,
                todayHighlight: true

            });

            // 添加校验并提交代码
            $.validator.setDefaults({
                submitHandler: function () {
                    var myForm = document.getElementById('commentForm');
                    var formData = new FormData(myForm);

                    $.ajax({
                        type: "POST",
                        url: "/index.ashx?method=insertUser",
                        data: formData,
                        processData: false,//重要
                        contentType: false,//重要
                        success: function (res) {
                            
       

                            if (res.data.status == 0) {
                                swal({   
                                    title: "失败!",   
                                    text: "您已提交过信息",   
                                    type: "error"   
                                    
                                   
                                }, function () {
                                window.location.reload()
                                            
                                })
                                
                            } else {
                                swal({   
                                    title: "成功!",   
                                    text: "提交成功",   
                                    type: "success"   
                                    
                                   
                                }, function () {
                                window.location.reload()
                                            
                                })
                           

                            }
                       
    
                        }
                    })
                }
            });
            $("#commentForm").validate({
                rules: {
                    xingming: "required",
                    cun: 'required',
                    sfzh: {
                        required: true,
                        checkSFZH: true,
                    },

                    phone: {
                        required: true,
                        checkPHONE: true,
                    },
                    // edate:'required',
                    back_address: 'required',
                    back_type: 'required',
                    helthy: 'required'
                },
                messages: {
                    xingming: "*必填",
                    cun: '*必填',
                    sfzh: {
                        required: "*必填",
                    },
                    // edate:'*必填',
                    phone: {
                        required: "*必填"

                    },
                    back_address: '*必填',
                    back_type: '*必填',
                    helthy: '*必填'

                },
                focusInvalid: true,
                focusCleanup: true,
            });
            $.validator.addMethod("checkSFZH", function (value, element, params) {
                var checkSFZH = /^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/;
                return this.optional(element) || (checkSFZH.test(value));
            }, "请输入正确的身份证号码！");
            $.validator.addMethod("checkPHONE", function (value, element, params) {
                var checkPHONE = /^[1][3,4,5,7,8][0-9]{9}$/;
                return this.optional(element) || (checkPHONE.test(value));
            }, "请输入正确的手机号码！");

        })


    </script>
</body>
</html>